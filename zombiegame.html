<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie Survivor</title>
    <link rel="stylesheet" href="zstyle.css">
</head>
<body>
<div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        <div id="gameUI">
            <div>Health: <span id="health">100</span></div>
            <div>Score: <span id="score">0</span></div>
            <div>Stage: <span id="wave">1</span></div>
            <div>Player Level: <span id="level">1</span></div>
            <div>XP: <span id="xp">0/100</span></div>
            <div>Money: $<span id="currency">0</span></div>
            <div>Weapon: <span id="currentWeaponName">Pistol</span></div>
            <div>Zombies: <span id="zombieCount">0</span></div>
            <div>Tools: <span id="playerTools">X N:0 W:0</span></div>
            <div id="difficultyDisplay" style="color: #ffaa00; font-size: 8px; font-weight: bold;">NORMAL MODE</div>
            <div style="color: #888; font-size: 8px; margin-top: 4px;">WASD: Move | T: Auto | B: Store | R: Walls</div>
            <div style="color: #00ff00; font-size: 8px;">Auto: <span id="autoTargetStatus">ON</span></div>
        </div>
        <button id="pauseButton" onclick="togglePause()">‚è∏</button>
        <button id="companionButton" onclick="buyCompanion()">+ Add Ally ($100)</button>
        <button id="fullscreenButton" onclick="toggleFullscreen()">‚õ∂</button>
        
        <!-- Mobile Touch Controls -->
        <div id="mobileControls" style="display: none;">
            <div id="virtualJoystick">
                <div id="joystickBase">
                    <div id="joystickKnob"></div>
                </div>
            </div>
            <div id="mobileActionButtons">
                <button class="mobile-btn" id="mobileShootBtn">üî´</button>
                <button class="mobile-btn" id="mobileAutoBtn">üéØ</button>
                <button class="mobile-btn" id="mobileStoreBtn">üè™</button>
                <button class="mobile-btn" id="mobileWallBtn">üß±</button>
                <button class="mobile-btn" id="mobilePauseBtn">‚è∏Ô∏è</button>
            </div>
        </div>
        
        <div id="startMenu">
            <div class="start-menu-content">
                <h1 class="game-title">ZOMBIE SURVIVOR</h1>
                <div class="subtitle">üßü Defend the Sanctuary üßü</div>
                
                <div class="difficulty-selection">
                    <h3>üéöÔ∏è SELECT DIFFICULTY</h3>
                    <div class="difficulty-buttons">
                        <button onclick="startNewGame('easy')" class="difficulty-button easy-mode" id="easyButton">
                            üòä EASY MODE
                            <div class="difficulty-desc">Relaxed gameplay, forgiving stats</div>
                        </button>
                        <button onclick="startNewGame('normal')" class="difficulty-button normal-mode" id="normalButton">
                            üéØ NORMAL MODE
                            <div class="difficulty-desc">Balanced challenge for most players</div>
                        </button>
                        <button onclick="startNewGame('hardcore')" class="difficulty-button hardcore-mode" id="hardcoreButton">
                            üíÄ HARDCORE MODE
                            <div class="difficulty-desc">Brutal survival challenge</div>
                        </button>
                    </div>
                </div>
                
                <div class="menu-options">
                    <button onclick="showHighScores()" class="menu-button" id="highScoresButton">üèÜ HIGH SCORES</button>
                    <button onclick="showInstructions()" class="menu-button" id="instructionsButton">üìñ HOW TO PLAY</button>
                </div>
                
                <div class="game-description">
                    <p>Survive endless waves of zombies while defending your sanctuary. Use weapons, build walls, and hire allies to stay alive as long as possible!</p>
                </div>
                
                <div class="version-info">v1.0 - Hardcore Edition</div>
            </div>
        </div>
        
        <div id="pauseOverlay">
            <div class="pause-title">PAUSED</div>
            <div class="how-to-play">
                <h3>üéÆ HOW TO PLAY</h3>
                
                <div class="controls-section">
                    <h4>‚å®Ô∏è Controls</h4>
                    <div class="control-grid">
                        <div><strong>WASD</strong> - Move Player</div>
                        <div><strong>Mouse</strong> - Aim & Auto-fire</div>
                        <div><strong>T</strong> - Toggle Auto-targeting</div>
                        <div><strong>B</strong> - Open/Close Store</div>
                        <div><strong>R</strong> - Rebuild Walls (need tools)</div>
                        <div><strong>P / ESC</strong> - Pause Game</div>
                        <div><strong>F11</strong> - Toggle Fullscreen</div>
                        <div><strong>F</strong> - Skip Level 7 (if stuck)</div>
                        <div><strong>Mouse Wheel</strong> - Scroll in Store</div>
                    </div>
                </div>

                <div class="gameplay-section">
                    <h4>üéØ Objective</h4>
                    <p>Survive waves of zombies while defending the sanctuary. Kill zombies to gain XP, level up, and earn money to buy better weapons and supplies.</p>
                </div>

                <div class="systems-section">
                    <h4>üõ†Ô∏è Game Systems</h4>
                    <div class="system-grid">
                        <div><strong>üè™ Store:</strong> Buy weapons, tools, and supplies</div>
                        <div><strong>üß± Walls:</strong> Protect sanctuary from zombies</div>
                        <div><strong>üë• Allies:</strong> Hire companions to help fight</div>
                        <div><strong>üîß Tools:</strong> Hammer, nails, wood to repair walls</div>
                        <div><strong>‚ö° Safe Zone:</strong> Heal inside the sanctuary</div>
                        <div><strong>üéØ Auto-Target:</strong> Automatically aims at nearest zombie</div>
                    </div>
                </div>

                <div class="tips-section">
                    <h4>üí° Tips</h4>
                    <ul>
                        <li>Stay in the sanctuary to heal</li>
                        <li>Buy tools early to repair walls</li>
                        <li>Higher level weapons unlock as you progress</li>
                        <li>Allies help but cost money to maintain</li>
                        <li>Use mouse wheel to scroll through all weapons in store</li>
                        <li>Some weapons have special abilities (pierce, explosive, etc.)</li>
                    </ul>
                </div>
                
                <div class="pause-buttons">
                    <button onclick="togglePause()">Resume Game</button>
                    <button onclick="quitGame()" class="quit-button">Quit to Menu</button>
                    <a href="index.html" class="home-button">‚Üê Back to Website</a>
                </div>
            </div>
        </div>
        <div id="gameOver">
            <h2 id="gameOverMessage">Game Over!</h2>
            <p>Final Score: <span id="finalScore">0</span></p>
            <p>Waves Survived: <span id="finalWave">0</span></p>
            <div id="newHighScore" style="display: none;">
                <h3>üéâ NEW HIGH SCORE! üéâ</h3>
                <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
                <button onclick="saveHighScore()">Save Score</button>
            </div>
            <button onclick="restartGame()">Play Again</button>
            <button onclick="showHighScores()">View High Scores</button>
            <button onclick="returnToMenu()" class="menu-button">Return to Menu</button>
        </div>

        <div id="highScoresModal" style="display: none;">
            <div class="modal-content">
                <h2>üèÜ HIGH SCORES üèÜ</h2>
                <div id="highScoresList"></div>
                <button onclick="closeHighScores()">Close</button>
                <button onclick="clearHighScores()">Clear All Scores</button>
                <button onclick="returnToMenu()" class="menu-button">Return to Menu</button>
            </div>
        </div>
    </div>

    <script src="zscript.js"></script>
    <script>
        // Ultra-simple mobile button fix
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                // Find buttons
                const easyBtn = document.getElementById('easyButton');
                const normalBtn = document.getElementById('normalButton');
                const hardcoreBtn = document.getElementById('hardcoreButton');
                
                if (easyBtn && normalBtn && hardcoreBtn) {
                    // Add click events that work on mobile
                    easyBtn.onclick = function() {
                        if (typeof window.startNewGame === 'function') {
                            window.startNewGame('easy');
                        }
                    };
                    
                    normalBtn.onclick = function() {
                        if (typeof window.startNewGame === 'function') {
                            window.startNewGame('normal');
                        }
                    };
                    
                    hardcoreBtn.onclick = function() {
                        if (typeof window.startNewGame === 'function') {
                            window.startNewGame('hardcore');
                        }
                    };
                }
            }, 2000); // Wait longer for game script to load
        });

        // Mobile scrolling management - monitor pause state
        if (isMobileDevice()) {
            // Function to check if pause overlay is visible
            function checkPauseState() {
                const pauseOverlay = document.getElementById('pauseOverlay');
                const startMenu = document.getElementById('startMenu');
                const gameOver = document.getElementById('gameOver');
                const highScoresModal = document.getElementById('highScoresModal');
                
                const isPaused = (pauseOverlay && pauseOverlay.style.display !== 'none') ||
                               (startMenu && startMenu.style.display !== 'none') ||
                               (gameOver && gameOver.style.display !== 'none') ||
                               (highScoresModal && highScoresModal.style.display !== 'none');
                
                if (isPaused) {
                    document.body.classList.add('pause-active');
                } else {
                    document.body.classList.remove('pause-active');
                }
            }
            
            // Check pause state periodically
            setInterval(checkPauseState, 100);
            
            // Also check on DOM changes
            const observer = new MutationObserver(checkPauseState);
            observer.observe(document.body, {
                attributes: true,
                subtree: true,
                attributeFilter: ['style', 'class']
            });
            
            // Initial check
            setTimeout(checkPauseState, 500);
            

        }


    </script>
</body>
</html>
















